<?xml version="1.0" encoding="UTF-8"?>
<x:description xmlns:x="http://www.jenitennison.com/xslt/xspec"
  xmlns:me="http://iati.me"
  stylesheet="../../../data-quality/rules/iati.xslt"
  xslt-version="3.0">

  <x:scenario label="Sectors">
    <x:scenario label="If there are sectors at the activity level">
      <x:context>
        <iati-activity>
          <sector code="12345"/>
          <transaction>
            <sector code="98765"/>
          </transaction>
        </iati-activity>
      </x:context>
      <x:expect label="It should produce message '6.6.2' if a transaction has a sector classification too." test="boolean(//me:feedback[@id='6.6.2'])"/>
    </x:scenario>

    <x:scenario label="If there are no sectors at the activity level">
      <x:context>
        <iati-activity>
        </iati-activity>
        <iati-activity>
          <transaction>
          </transaction>
        </iati-activity>
        <iati-activity>
          <transaction>
          </transaction>
          <transaction>
            <sector code="12345"/>
          </transaction>
        </iati-activity>
      </x:context>
      <x:expect label="It should produce message '6.2.2' if there are no transactions." test="boolean(/iati-activity[1]/me:feedback[@id='6.2.2'])"/>
      <x:expect label="It should produce message '6.2.2' if there is a single transaction without a sector classification." test="boolean(/iati-activity[2]/me:feedback[@id='6.2.2'])"/>
      <x:expect label="It should produce message '6.7.2' if some transactions have no sector classification." test="boolean(/iati-activity[3]/me:feedback[@id='6.7.2'])"/>
    </x:scenario>
    
  </x:scenario>  
  
</x:description>
