<?xml version="1.0" encoding="UTF-8"?>
<x:description xmlns:x="http://www.jenitennison.com/xslt/xspec"
  xmlns:me="http://iati.me"
  xslt-version="3.0">

  <x:scenario label="Activity identifiers">
    <x:scenario label="If an activity identifier contains leading or trailing spaces">
      <x:context>
        <iati-activity>
          <iati-identifier> ABC</iati-identifier>
        </iati-activity>
        <iati-activity>
          <iati-identifier>XYZ  </iati-identifier>
        </iati-activity>
      </x:context>
      
      <x:expect label="It should produce message 1.3.1 for activity 1." test="boolean(//iati-activity[1]//me:feedback[@id='1.3.1'])"/>
      <x:expect label="It should be severity 'error'." test="boolean(//iati-activity[1]//me:feedback[@id='1.3.1']/@type='danger')"/>
      <x:expect label="It should produce message 1.3.1 for activity 2." test="boolean(//iati-activity[2]//me:feedback[@id='1.3.1'])"/>
      <x:expect label="It should be severity 'error'." test="boolean(//iati-activity[2]//me:feedback[@id='1.3.1']/@type='danger')"/>
    </x:scenario>
    
    <x:scenario label="If an activity identifier contains forbidden characters">
      <x:context>
        <iati-activity>
          <iati-identifier>AB&amp;C</iati-identifier>
        </iati-activity>
        <iati-activity>
          <iati-identifier>X/YZ</iati-identifier>
        </iati-activity>
      </x:context>
      
      <x:expect label="It should produce message 1.3.13 for activity 1." test="boolean(//iati-activity[1]//me:feedback[@id='1.3.13'])"/>
      <x:expect label="It should be severity 'error'." test="boolean(//iati-activity[1]//me:feedback[@id='1.3.13']/@type='warning')"/>
      <x:expect label="It should produce message 1.3.13 for activity 2." test="boolean(//iati-activity[2]//me:feedback[@id='1.3.13'])"/>
      <x:expect label="It should be severity 'error'." test="boolean(//iati-activity[2]//me:feedback[@id='1.3.13']/@type='warning')"/>
    </x:scenario>
  </x:scenario>

</x:description>
